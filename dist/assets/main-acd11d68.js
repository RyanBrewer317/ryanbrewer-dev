var Ye=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var m=(e,t,n)=>(Ye(e,t,"read from private field"),n?n.call(e):t.get(e)),v=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},b=(e,t,n,r)=>(Ye(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var me=(e,t,n)=>(Ye(e,t,"access private method"),n);import"./style-27b4b240.js";class p{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class re{static fromArray(t,n){let r=n||new qe;for(let i=t.length-1;i>=0;--i)r=new Ct(t[i],r);return r}[Symbol.iterator](){return new ln(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}}function Ae(e,t){return new Ct(e,t)}function a(e,t){return re.fromArray(e,t)}var fe;class ln{constructor(t){v(this,fe,void 0);b(this,fe,t)}next(){if(m(this,fe)instanceof qe)return{done:!0};{let{head:t,tail:n}=m(this,fe);return b(this,fe,n),{value:t,done:!1}}}}fe=new WeakMap;class qe extends re{}class Ct extends re{constructor(t,n){super(),this.head=t,this.tail=n}}class Me{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatAt(t){return fn(this.buffer.slice(t,t+8))}intFromSlice(t,n){return an(this.buffer.slice(t,n))}binaryFromSlice(t,n){return new Me(this.buffer.slice(t,n))}sliceAfter(t){return new Me(this.buffer.slice(t))}}function an(e){e=e.reverse();let t=0;for(let n=e.length-1;n>=0;n--)t=t*256+e[n];return t}function fn(e){return new Float64Array(e.reverse().buffer)[0]}class Ee extends p{static isResult(t){return t instanceof Ee}}class h extends Ee{constructor(t){super(),this[0]=t}isOk(){return!0}}class y extends Ee{constructor(t){super(),this[0]=t}isOk(){return!1}}function ie(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!At(r)||!At(i)||!mn(r,i)||on(r,i)||hn(r,i)||dn(r,i)||pn(r,i)||wn(r,i)||yn(r,i))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[l,f]=cn(r);for(let o of l(r))n.push(f(r,o),f(i,o))}return!0}function cn(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function on(e,t){return e instanceof Date&&(e>t||e<t)}function hn(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function dn(e,t){return Array.isArray(e)&&e.length!==t.length}function pn(e,t){return e instanceof Map&&e.size!==t.size}function wn(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function yn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function At(e){return typeof e=="object"&&e!==null}function mn(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function st(e,t,n,r,i,s){let u=new globalThis.Error(i);u.gleam_error=e,u.module=t,u.line=n,u.fn=r;for(let l in s)u[l]=s[l];return u}class ut extends p{constructor(t){super(),this[0]=t}}class Et extends p{}function bn(e,t){if(e instanceof ut){let n=e[0];return new h(n)}else return new y(t)}function gn(e){return Pn(e)}function We(e){return Hn(e)}function _n(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=Ae(i,r)}}}function xn(e){return _n(e,a([]))}function $n(e){return xn(e)}function An(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return $n(s);{let u=r.head;e=r.tail,t=i,n=Ae(i(u),s)}}}function En(e,t){return An(e,t,a([]))}function Mt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let u=r.head;e=r.tail,t=s(i,u),n=s}}}function Oe(e,t){if(e.isOk()){let n=e[0];return new h(t(n))}else{let n=e[0];return new y(n)}}function Nt(e,t){if(e.isOk()){let n=e[0];return new h(n)}else{let n=e[0];return new y(t(n))}}function g(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new y(n)}}function On(e,t){return e.isOk()?e[0]:t()}function kn(e,t){return e.isOk()?e:t}function zt(e,t){if(e.isOk()){let n=e[0];return new h(n)}else return new y(t)}function Rt(e){return Kn(e)}function Bt(e){return e}class lt extends p{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}}function at(e){return e}function jt(e){return Qn(e)}function qt(e){return Ht(e)}function In(e){return er(e)}function Wt(e){return t=>{if(e.hasLength(0))return new y(a([new lt("another type",qt(t),a([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new h(s)}else return Wt(r)(t)}}}function Tn(e,t){let n=at(t),r=Wt(a([jt,s=>Oe(In(s),We)])),i=(()=>{let s=r(n);if(s.isOk())return s[0];{let u=a(["<",qt(n),">"]),l=Rt(u);return Bt(l)}})();return e.withFields({path:Ae(i,e.path)})}function Sn(e,t){return Nt(e,n=>En(n,t))}function Ot(e,t){return n=>{let r=new lt("field","nothing",a([]));return g(tr(n,e),i=>{let u=bn(i,a([r])),l=g(u,t);return Sn(l,f=>Tn(f,e))})}}const kt=new WeakMap,Ge=new DataView(new ArrayBuffer(8));let Ke=0;function Qe(e){const t=kt.get(e);if(t!==void 0)return t;const n=Ke++;return Ke===2147483647&&(Ke=0),kt.set(e,n),n}function et(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ft(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function Ut(e){Ge.setFloat64(0,e);const t=Ge.getInt32(0),n=Ge.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function Ln(e){return ft(e.toString())}function vn(e){const t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{const r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Qe(e);if(e instanceof Date)return Ut(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+C(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+C(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+et(C(r),C(i))|0});else{const r=Object.keys(e);for(let i=0;i<r.length;i++){const s=r[i],u=e[s];n=n+et(C(u),ft(s))|0}}return n}function C(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ut(e);case"string":return ft(e);case"bigint":return Ln(e);case"object":return vn(e);case"symbol":return Qe(e);case"function":return Qe(e);default:return 0}}const F=5,ct=Math.pow(2,F),Cn=ct-1,Mn=ct/2,Nn=ct/4,O=0,U=1,L=2,ce=3,ot={type:L,bitmap:0,array:[]};function ke(e,t){return e>>>t&Cn}function Ue(e,t){return 1<<ke(e,t)}function zn(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function ht(e,t){return zn(e&t-1)}function M(e,t,n){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function Rn(e,t,n){const r=e.length,i=new Array(r+1);let s=0,u=0;for(;s<t;)i[u++]=e[s++];for(i[u++]=n;s<r;)i[u++]=e[s++];return i}function tt(e,t){const n=e.length,r=new Array(n-1);let i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function Ft(e,t,n,r,i,s){const u=C(t);if(u===r)return{type:ce,hash:u,array:[{type:O,k:t,v:n},{type:O,k:i,v:s}]};const l={val:!1};return Ie(dt(ot,e,u,t,n,l),e,r,i,s,l)}function Ie(e,t,n,r,i,s){switch(e.type){case U:return Bn(e,t,n,r,i,s);case L:return dt(e,t,n,r,i,s);case ce:return jn(e,t,n,r,i,s)}}function Bn(e,t,n,r,i,s){const u=ke(n,t),l=e.array[u];if(l===void 0)return s.val=!0,{type:U,size:e.size+1,array:M(e.array,u,{type:O,k:r,v:i})};if(l.type===O)return ie(r,l.k)?i===l.v?e:{type:U,size:e.size,array:M(e.array,u,{type:O,k:r,v:i})}:(s.val=!0,{type:U,size:e.size,array:M(e.array,u,Ft(t+F,l.k,l.v,n,r,i))});const f=Ie(l,t+F,n,r,i,s);return f===l?e:{type:U,size:e.size,array:M(e.array,u,f)}}function dt(e,t,n,r,i,s){const u=Ue(n,t),l=ht(e.bitmap,u);if(e.bitmap&u){const f=e.array[l];if(f.type!==O){const _=Ie(f,t+F,n,r,i,s);return _===f?e:{type:L,bitmap:e.bitmap,array:M(e.array,l,_)}}const o=f.k;return ie(r,o)?i===f.v?e:{type:L,bitmap:e.bitmap,array:M(e.array,l,{type:O,k:r,v:i})}:(s.val=!0,{type:L,bitmap:e.bitmap,array:M(e.array,l,Ft(t+F,o,f.v,n,r,i))})}else{const f=e.array.length;if(f>=Mn){const o=new Array(32),_=ke(n,t);o[_]=dt(ot,t+F,n,r,i,s);let k=0,I=e.bitmap;for(let se=0;se<32;se++){if(I&1){const He=e.array[k++];o[se]=He}I=I>>>1}return{type:U,size:f+1,array:o}}else{const o=Rn(e.array,l,{type:O,k:r,v:i});return s.val=!0,{type:L,bitmap:e.bitmap|u,array:o}}}}function jn(e,t,n,r,i,s){if(n===e.hash){const u=pt(e,r);if(u!==-1)return e.array[u].v===i?e:{type:ce,hash:n,array:M(e.array,u,{type:O,k:r,v:i})};const l=e.array.length;return s.val=!0,{type:ce,hash:n,array:M(e.array,l,{type:O,k:r,v:i})}}return Ie({type:L,bitmap:Ue(e.hash,t),array:[e]},t,n,r,i,s)}function pt(e,t){const n=e.array.length;for(let r=0;r<n;r++)if(ie(t,e.array[r].k))return r;return-1}function Ne(e,t,n,r){switch(e.type){case U:return qn(e,t,n,r);case L:return Wn(e,t,n,r);case ce:return Un(e,r)}}function qn(e,t,n,r){const i=ke(n,t),s=e.array[i];if(s!==void 0){if(s.type!==O)return Ne(s,t+F,n,r);if(ie(r,s.k))return s}}function Wn(e,t,n,r){const i=Ue(n,t);if(!(e.bitmap&i))return;const s=ht(e.bitmap,i),u=e.array[s];if(u.type!==O)return Ne(u,t+F,n,r);if(ie(r,u.k))return u}function Un(e,t){const n=pt(e,t);if(!(n<0))return e.array[n]}function wt(e,t,n,r){switch(e.type){case U:return Fn(e,t,n,r);case L:return Vn(e,t,n,r);case ce:return Dn(e,r)}}function Fn(e,t,n,r){const i=ke(n,t),s=e.array[i];if(s===void 0)return e;let u;if(s.type===O){if(!ie(s.k,r))return e}else if(u=wt(s,t+F,n,r),u===s)return e;if(u===void 0){if(e.size<=Nn){const l=e.array,f=new Array(e.size-1);let o=0,_=0,k=0;for(;o<i;){const I=l[o];I!==void 0&&(f[_]=I,k|=1<<o,++_),++o}for(++o;o<l.length;){const I=l[o];I!==void 0&&(f[_]=I,k|=1<<o,++_),++o}return{type:L,bitmap:k,array:f}}return{type:U,size:e.size-1,array:M(e.array,i,u)}}return{type:U,size:e.size,array:M(e.array,i,u)}}function Vn(e,t,n,r){const i=Ue(n,t);if(!(e.bitmap&i))return e;const s=ht(e.bitmap,i),u=e.array[s];if(u.type!==O){const l=wt(u,t+F,n,r);return l===u?e:l!==void 0?{type:L,bitmap:e.bitmap,array:M(e.array,s,l)}:e.bitmap===i?void 0:{type:L,bitmap:e.bitmap^i,array:tt(e.array,s)}}return ie(r,u.k)?e.bitmap===i?void 0:{type:L,bitmap:e.bitmap^i,array:tt(e.array,s)}:e}function Dn(e,t){const n=pt(e,t);if(n<0)return e;if(e.array.length!==1)return{type:ce,hash:e.hash,array:tt(e.array,n)}}function Vt(e,t){if(e===void 0)return;const n=e.array,r=n.length;for(let i=0;i<r;i++){const s=n[i];if(s!==void 0){if(s.type===O){t(s.v,s.k);continue}Vt(s,t)}}}class z{static fromObject(t){const n=Object.keys(t);let r=z.new();for(let i=0;i<n.length;i++){const s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=z.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new z(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;const r=Ne(this.root,0,C(t),t);return r===void 0?n:r.v}set(t,n){const r={val:!1},i=this.root===void 0?ot:this.root,s=Ie(i,0,C(t),t,n,r);return s===this.root?this:new z(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;const n=wt(this.root,0,C(t),t);return n===this.root?this:n===void 0?z.new():new z(n,this.size-1)}has(t){return this.root===void 0?!1:Ne(this.root,0,C(t),t)!==void 0}entries(){if(this.root===void 0)return[];const t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){Vt(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+et(C(n),C(r))|0}),t}equals(t){if(!(t instanceof z)||this.size!==t.size)return!1;let n=!0;return this.forEach((r,i)=>{n=n&&ie(t.get(i,!r),r)}),n}}const yt=void 0,It={};function Pn(e){return/^[-+]?(\d+)$/.test(e)?new h(parseInt(e)):new y(yt)}function Hn(e){return e.toString()}function Yn(e){const t=Dt(e);return t?re.fromArray(Array.from(t).map(n=>n.segment)):re.fromArray(e.match(/./gsu))}function Dt(e){if(Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Gn(e){var r,i;let t;const n=Dt(e);return n?t=(r=n.next().value)==null?void 0:r.segment:t=(i=e.match(/./su))==null?void 0:i[0],t?new h([t,e.slice(t.length)]):new y(yt)}function Kn(e){let t="";for(const n of e)t=t+n;return t}function mt(e,t){return e.indexOf(t)>=0}function Xn(){return z.new()}function Pt(e,t){const n=e.get(t,It);return n===It?new y(yt):new h(n)}function Jn(e,t,n){return n.set(e,t)}function Ht(e){if(typeof e=="string")return"String";if(e instanceof Ee)return"Result";if(e instanceof re)return"List";if(e instanceof Me)return"BitArray";if(e instanceof z)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{const t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function bt(e,t){return Zn(e,Ht(t))}function Zn(e,t){return new y(re.fromArray([new lt(e,t,re.fromArray([]))]))}function Qn(e){return typeof e=="string"?new h(e):bt("String",e)}function er(e){return Number.isInteger(e)?new h(e):bt("Int",e)}function tr(e,t){const n=()=>bt("Dict",e);if(e instanceof z||e instanceof WeakMap||e instanceof Map){const r=Pt(e,t);return new h(r.isOk()?new ut(r[0]):new Et)}else return Object.getPrototypeOf(e)==Object.prototype?Tt(e,t,()=>new h(new Et)):Tt(e,t,n)}function Tt(e,t,n){try{return t in e?new h(new ut(e[t])):n()}catch{return n()}}function ze(){return Xn()}function gt(e,t){return Pt(e,t)}function J(e,t,n){return Jn(t,n,e)}function Yt(e){let n=Rt(e);return Bt(n)}function nr(e){return Gn(e)}function rr(e,t){return n=>t(e(n))}class ir extends p{constructor(t){super(),this.all=t}}function St(){return new ir(a([]))}function H(e,t,n,r){if(t!=null&&t.tag&&(e==null?void 0:e.nodeType)===1){const i=t.tag.toUpperCase(),s=t.namespace||"http://www.w3.org/1999/xhtml";return e.nodeName===i&&e.namespaceURI==s?sr(e,t,n,r):Lt(e,t,n,r)}return t!=null&&t.tag?Lt(e,t,n,r):typeof(t==null?void 0:t.content)=="string"?(e==null?void 0:e.nodeType)===3?lr(e,t):ur(e,t):document.createComment(["[internal lustre error] I couldn't work out how to render this element. This","function should only be called internally by lustre's runtime: if you think","this is an error, please open an issue at","https://github.com/hayleigh-dot-dev/gleam-lustre/issues/new"].join(" "))}function Lt(e,t,n,r=null){const i=t.namespace?document.createElementNS(t.namespace,t.tag):document.createElement(t.tag);i.$lustre={__registered_events:new Set};let s="";for(const u of t.attrs)u[0]==="class"?ge(i,u[0],`${i.className} ${u[1]}`):u[0]==="style"?ge(i,u[0],`${i.style.cssText} ${u[1]}`):u[0]==="dangerous-unescaped-html"?s+=u[1]:u[0]!==""&&ge(i,u[0],u[1],n);if(customElements.get(t.tag))i._slot=t.children;else if(t.tag==="slot"){let u=new qe,l=r;for(;l;)if(l._slot){u=l._slot;break}else l=l.parentNode;for(const f of u)i.appendChild(H(null,f,n,i))}else if(s)i.innerHTML=s;else for(const u of t.children)i.appendChild(H(null,u,n,i));return e&&e.replaceWith(i),i}function sr(e,t,n,r){const i=e.attributes,s=new Map;e.$lustre??(e.$lustre={__registered_events:new Set});for(const u of t.attrs)u[0]==="class"&&s.has("class")?s.set(u[0],`${s.get("class")} ${u[1]}`):u[0]==="style"&&s.has("style")?s.set(u[0],`${s.get("style")} ${u[1]}`):u[0]==="dangerous-unescaped-html"&&s.has("dangerous-unescaped-html")?s.set(u[0],`${s.get("dangerous-unescaped-html")} ${u[1]}`):u[0]!==""&&s.set(u[0],u[1]);for(const{name:u,value:l}of i)if(!s.has(u))e.removeAttribute(u);else{const f=s.get(u);f!==l&&(ge(e,u,f,n),s.delete(u))}for(const u of e.$lustre.__registered_events)if(!s.has(u)){const l=u.slice(2).toLowerCase();e.removeEventListener(l,e.$lustre[`${u}Handler`]),e.$lustre.__registered_events.delete(u),delete e.$lustre[u],delete e.$lustre[`${u}Handler`]}for(const[u,l]of s)ge(e,u,l,n);if(customElements.get(t.tag))e._slot=t.children;else if(t.tag==="slot"){let u=e.firstChild,l=new qe,f=r;for(;f;)if(f._slot){l=f._slot;break}else f=f.parentNode;for(;u;)Array.isArray(l)&&l.length?H(u,l.shift(),n,e):l.head&&(H(u,l.head,n,e),l=l.tail),u=u.nextSibling;for(const o of l)e.appendChild(H(null,o,n,e))}else if(s.has("dangerous-unescaped-html"))e.innerHTML=s.get("dangerous-unescaped-html");else{let u=e.firstChild,l=t.children;for(;u;)if(Array.isArray(l)&&l.length){const f=u.nextSibling;H(u,l.shift(),n,e),u=f}else if(l.head){const f=u.nextSibling;H(u,l.head,n,e),l=l.tail,u=f}else{const f=u.nextSibling;u.remove(),u=f}for(const f of l)e.appendChild(H(null,f,n,e))}return e}function ge(e,t,n,r){switch(typeof n){case"string":e.getAttribute(t)!==n&&e.setAttribute(t,n),n===""&&e.removeAttribute(t),t==="value"&&e.value!==n&&(e.value=n);break;case(t.startsWith("on")&&"function"):{if(e.$lustre[t]===n)break;const i=t.slice(2).toLowerCase(),s=u=>Oe(n(u),r);e.$lustre[`${t}Handler`]&&e.removeEventListener(i,e.$lustre[`${t}Handler`]),e.addEventListener(i,s),e.$lustre[t]=n,e.$lustre[`${t}Handler`]=s,e.$lustre.__registered_events.add(t);break}default:e[t]=n}}function ur(e,t){const n=document.createTextNode(t.content);return e&&e.replaceWith(n),n}function lr(e,t){const n=e.nodeValue,r=t.content;return r?(n!==r&&(e.nodeValue=r),e):(e==null||e.remove(),null)}var S,G,K,X,ne,_e,de,pe,xe,nt,$e,rt;class ar{constructor(t,n,r){v(this,xe);v(this,$e);v(this,S,null);v(this,G,null);v(this,K,[]);v(this,X,[]);v(this,ne,!1);v(this,_e,null);v(this,de,null);v(this,pe,null);b(this,_e,t),b(this,de,n),b(this,pe,r)}start(t,n){if(!or())return new y(new Ar);if(m(this,S))return new y(new _r);if(b(this,S,t instanceof HTMLElement?t:document.querySelector(t)),!m(this,S))return new y(new $r);const[r,i]=m(this,_e).call(this,n);return b(this,G,r),b(this,X,i.all.toArray()),b(this,ne,!0),window.requestAnimationFrame(()=>me(this,xe,nt).call(this)),new h(s=>this.dispatch(s))}dispatch(t){m(this,K).push(t),me(this,xe,nt).call(this)}emit(t,n=null){m(this,S).dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:n,composed:!0}))}destroy(){if(!m(this,S))return new y(new xr);m(this,S).remove(),b(this,S,null),b(this,G,null),b(this,K,[]),b(this,X,[]),b(this,ne,!1),b(this,de,()=>{}),b(this,pe,()=>{})}}S=new WeakMap,G=new WeakMap,K=new WeakMap,X=new WeakMap,ne=new WeakMap,_e=new WeakMap,de=new WeakMap,pe=new WeakMap,xe=new WeakSet,nt=function(){if(me(this,$e,rt).call(this),m(this,ne)){const t=m(this,pe).call(this,m(this,G));b(this,S,H(m(this,S),t,n=>this.dispatch(n))),b(this,ne,!1)}},$e=new WeakSet,rt=function(t=0){if(m(this,S)){if(m(this,K).length)for(;m(this,K).length;){const[n,r]=m(this,de).call(this,m(this,G),m(this,K).shift());m(this,ne)||b(this,ne,m(this,G)!==n),b(this,G,n),b(this,X,m(this,X).concat(r.all.toArray()))}for(;m(this,X).length;)m(this,X).shift()(n=>this.dispatch(n),(n,r)=>this.emit(n,r));m(this,K).length&&(t>=5?console.warn(tooManyUpdates):me(this,$e,rt).call(this,++t))}};const fr=(e,t,n)=>new ar(e,t,n),cr=(e,t,n)=>e.start(t,n),or=()=>window&&window.document;class Gt extends p{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}}class hr extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}function we(e,t){return new Gt(e,at(t),!1)}function Kt(e,t){return new Gt(e,at(t),!0)}function dr(e,t){return new hr("on"+e,rr(t,n=>zt(n,void 0)))}function pr(e){return we("style",Mt(e,"",(t,n)=>{let r=n[0],i=n[1];return t+r+":"+i+";"}))}function vt(e){return we("id",e)}function wr(e){return we("placeholder",e)}function ue(e){return we("href",e)}function yr(e){return we("src",e)}function mr(e){return Kt("height",We(e))}function br(e){return Kt("width",We(e))}class gr extends p{constructor(t){super(),this.content=t}}class A extends p{constructor(t,n,r,i,s,u){super(),this.namespace=t,this.tag=n,this.attrs=r,this.children=i,this.self_closing=s,this.void=u}}function Q(e,t,n){return e==="area"?new A("",e,t,a([]),!1,!0):e==="base"?new A("",e,t,a([]),!1,!0):e==="br"?new A("",e,t,a([]),!1,!0):e==="col"?new A("",e,t,a([]),!1,!0):e==="embed"?new A("",e,t,a([]),!1,!0):e==="hr"?new A("",e,t,a([]),!1,!0):e==="img"?new A("",e,t,a([]),!1,!0):e==="input"?new A("",e,t,a([]),!1,!0):e==="link"?new A("",e,t,a([]),!1,!0):e==="meta"?new A("",e,t,a([]),!1,!0):e==="param"?new A("",e,t,a([]),!1,!0):e==="source"?new A("",e,t,a([]),!1,!0):e==="track"?new A("",e,t,a([]),!1,!0):e==="wbr"?new A("",e,t,a([]),!1,!0):new A("",e,t,n,!1,!1)}function d(e){return new gr(e)}class _r extends p{}class xr extends p{}class $r extends p{}class Ar extends p{}function Er(e,t,n){return fr(s=>[e(s),St()],(s,u)=>[t(s,u),St()],n)}function Xe(e,t){return Q("h3",e,t)}function Je(e,t){return Q("div",e,t)}function Le(e,t){return Q("p",e,t)}function le(e,t){return Q("a",e,t)}function Or(e){return Q("br",e,a([]))}function ae(e,t){return Q("code",e,t)}function kr(e,t){return Q("strong",e,t)}function Ir(e){return Q("iframe",e,a([]))}function Tr(e){return Q("textarea",e,a([]))}function Sr(e,t){return dr(e,t)}function Lr(e){let t=e;return Ot("target",Ot("value",jt))(t)}function vr(e){return Sr("input",t=>{let n=Lr(t);return Oe(n,e)})}class Re extends p{constructor(t){super(),this.error=t}}class Ce extends p{constructor(t,n){super(),this.row=t,this.col=n}}class W extends p{constructor(t){super(),this.parse=t}}function $(e,t,n){let r=e.parse;return r(t,n)}function Fe(e){return new W((t,n)=>{if(!(n instanceof Ce))throw st("assignment_no_match","party",58,"","Assignment pattern did not match",{value:n});let r=n.row,i=n.col;if(t.atLeastLength(1)){let s=t.head,u=t.tail;return e(s)?s===`
`?new h([s,u,new Ce(r+1,0)]):new h([s,u,new Ce(r,i+1)]):new y(new Re(s))}else return new y(new Re("EOF"))})}function x(e){return Fe(t=>e===t)}function ye(e,t){return new W((n,r)=>kn($(e,n,r),$(t,n,r)))}function _t(e){return new W((t,n)=>{if(e.hasLength(0))return new y(new Re("choiceless choice"));if(e.hasLength(1)){let r=e.head;return $(r,t,n)}else{let r=e.head,i=e.tail,s=$(r,t,n);if(s.isOk()){let u=s[0][0],l=s[0][1],f=s[0][2];return new h([u,l,f])}else return $(_t(i),t,n)}})}function Te(e){return new W((t,n)=>{let r=$(e,t,n);if(r.isOk()){let i=r[0][0],s=r[0][1],u=r[0][2];return Oe($(Te(e),s,u),l=>[Ae(i,l[0]),l[1],l[2]])}else return new h([a([]),t,n])})}function Cr(e){return new W((t,n)=>{let r=$(e,t,n);if(r.isOk()){let i=r[0][0],s=r[0][1],u=r[0][2];return Oe($(Te(e),s,u),l=>[Ae(i,l[0]),l[1],l[2]])}else{let i=r[0];return new y(i)}})}function be(e,t){return new W((n,r)=>{let i=$(e,n,r);if(i.isOk()){let s=i[0][0],u=i[0][1],l=i[0][2];return new h([t(s),u,l])}else{let s=i[0];return new y(s)}})}function Mr(e){return new W((t,n)=>{let r=$(e,t,n);if(r.isOk()){let i=r[0][0],s=r[0][1],u=r[0][2];return new h([new h(i),s,u])}else return new h([new y(void 0),t,n])})}function xt(e){return new W((t,n)=>$(e,t,n).isOk()?new y(new Re("")):new h([void 0,t,n]))}function Z(e){return new W((t,n)=>$(e(),t,n))}function c(e,t){return new W((n,r)=>{let i=$(e,n,r);if(i.isOk()){let s=i[0][0],u=i[0][1],l=i[0][2];return $(t(s),u,l)}else{let s=i[0];return new y(s)}})}function T(e){return new W((t,n)=>new h([e,t,n]))}function oe(e){let t=nr(e);if(t.isOk()){let n=t[0][0],r=t[0][1];return c(x(n),i=>c(oe(r),s=>T(i+s)))}else return T("")}function Nr(e,t){let n=$(e,Yn(t),new Ce(1,1));if(n.isOk()){let r=n[0][0];return new h(r)}else{let r=n[0];return new y(r)}}function zr(){return Fe(e=>mt("abcdefghijklmnopqrstuvwxyz",e))}function Rr(){return Fe(e=>mt("ABCDEFGHIJKLMNOPQRSTUVWXYZ",e))}function Xt(){return ye(zr(),Rr())}function Jt(){return Fe(e=>mt("0123456789",e))}function Ve(){return ye(Jt(),Xt())}class Zt extends p{constructor(t){super(),this[0]=t}}class Qt extends p{constructor(t){super(),this[0]=t}}class en extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}class tn extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}class nn extends p{}class rn extends p{}class $t extends p{constructor(t,n,r){super(),this[0]=t,this[1]=n,this[2]=r}}class Br extends p{constructor(t,n,r,i){super(),this[0]=t,this[1]=n,this[2]=r,this[3]=i}}class sn extends p{constructor(t){super(),this.int=t}}class ee extends p{constructor(t,n){super(),this.val=t,this.gen=n}}class he extends p{constructor(t){super(),this[0]=t}}class R extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}class B extends p{constructor(t,n,r){super(),this[0]=t,this[1]=n,this[2]=r}}class V extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}class E extends p{}class q extends p{}class N extends p{constructor(t,n,r,i){super(),this[0]=t,this[1]=n,this[2]=r,this[3]=i}}class Se extends p{constructor(t,n,r,i,s){super(),this[0]=t,this[1]=n,this[2]=r,this[3]=i,this[4]=s}}function jr(){let e=Cr(Jt()),t=be(e,Yt),n=be(t,gn),r=be(n,i=>On(i,()=>{throw st("panic","tinytypedlang",23,"","parsed int isn't an int",{})}));return be(r,i=>new Zt(i))}function De(){return c(Xt(),e=>c(Te(ye(Ve(),x("_"))),t=>T(e+Yt(t))))}function qr(){let e=De();return be(e,t=>new Qt(t))}function Wr(){return c(oe("Type"),e=>c(xt(ye(Ve(),x("_"))),t=>T(new nn)))}function Ur(){return c(oe("Int"),e=>c(xt(ye(Ve(),x("_"))),t=>T(new rn)))}function j(){return c(Te(_t(a([x(" "),x("	"),x(`
`)]))),e=>T(void 0))}function Ze(e,t){return t(new sn(e.int+1),e.int)}function P(e,t,n){if(t instanceof Zt){let r=t[0];return new h(new ee(new he(r),e))}else if(t instanceof Qt){let r=t[0],i=gt(n,r);if(i.isOk()){let s=i[0];return new h(new ee(new R(s,r),e))}else return new y("Wait! "+r+" isn't defined anywhere!")}else if(t instanceof en){let r=t[0],i=t[1];return Ze(e,(s,u)=>g(P(s,i,J(n,r,u)),l=>{let f=new B(u,r,l.val),o=new ee(f,s);return new h(o)}))}else if(t instanceof tn){let r=t[0],i=t[1];return g(P(e,r,n),s=>g(P(s.gen,i,n),u=>{let l=new V(s.val,u.val),f=new ee(l,u.gen);return new h(f)}))}else{if(t instanceof nn)return new h(new ee(new E,e));if(t instanceof rn)return new h(new ee(new q,e));if(t instanceof $t){let r=t[0],i=t[1],s=t[2];return Ze(e,(u,l)=>g(P(u,i,n),f=>g(P(f.gen,s,J(n,r,l)),o=>{let _=new N(l,r,f.val,o.val),k=new ee(_,o.gen);return new h(k)})))}else{let r=t[0],i=t[1],s=t[2],u=t[3];return Ze(e,(l,f)=>g(P(l,i,n),o=>{let _=J(n,r,f);return g(P(o.gen,s,_),k=>g(P(k.gen,u,_),I=>{let se=new Se(f,r,o.val,k.val,I.val),He=new ee(se,I.gen);return new h(He)}))}))}}}function Fr(e,t){return g(P(e,t,ze()),n=>new h(n.val))}function Pe(e,t,n){let r=i=>Pe(i,t,n);if(e instanceof he){let i=e[0];return new he(i)}else if(e instanceof R){let i=e[0];return t===i?n:e}else if(e instanceof B){let i=e[0],s=e[1],u=e[2];return new B(i,s,r(u))}else if(e instanceof V){let i=e[0],s=e[1];return new V(r(i),r(s))}else{if(e instanceof E)return new E;if(e instanceof q)return new q;if(e instanceof N){let i=e[0],s=e[1],u=e[2],l=e[3];return new N(i,s,r(u),r(l))}else{let i=e[0],s=e[1],u=e[2],l=e[3],f=e[4];return new Se(i,s,r(u),r(l),r(f))}}}function Y(e,t){for(;;){let n=e,r=t;if(n instanceof he)return n;if(n instanceof R){let i=n[0],s=gt(r,i);return s.isOk()?s[0]:n}else if(n instanceof V){let i=n[0],s=n[1],u=Y(i,r),l=Y(s,r);if(u instanceof B){let f=u[0];e=u[2],t=J(r,f,l)}else return new V(u,l)}else{if(n instanceof E)return new E;if(n instanceof q)return new q;if(n instanceof Se){let i=n[0],s=n[3];e=n[4],t=J(r,i,Y(s,r))}else if(n instanceof B){let i=n[0],s=n[1],u=n[2];return new B(i,s,Y(u,r))}else{let i=n[0],s=n[1],u=n[2],l=n[3];return new N(i,s,Y(u,r),Y(l,r))}}}}function it(e,t,n){let r=Y(e,n),i=Y(t,n);if(r instanceof R&&i instanceof R){let s=r[0],u=i[0];return s===u}else{if(r instanceof q&&i instanceof q)return!0;if(r instanceof E&&i instanceof E)return!0;if(r instanceof N&&i instanceof N){let s=r[0],u=r[1],l=r[2],f=r[3],o=i[0],_=i[2],k=i[3];return it(l,_,n)&&it(Pe(k,o,new R(s,u)),f,n)}else return!1}}function Vr(e){return Y(e,ze())}function te(e,t){for(;;){let n=e,r=t;if(r instanceof R)return r[0]===n;if(r instanceof B){let i=r[2];e=n,t=i}else if(r instanceof V){let i=r[0],s=r[1];return te(n,i)||te(n,s)}else if(r instanceof N){let i=r[2],s=r[3];return te(n,i)||te(n,s)}else if(r instanceof Se){let i=r[2],s=r[3],u=r[4];return te(n,i)||te(n,s)||te(n,u)}else return!1}}function w(e){if(e instanceof he){let t=e[0];return We(t)}else{if(e instanceof R)return e[1];if(e instanceof B){let t=e[1],n=e[2];return"\\"+t+". "+w(n)}else if(e instanceof V&&e[0]instanceof B){let t=e[0],n=e[1];return"("+w(t)+")("+w(n)+")"}else if(e instanceof V){let t=e[0],n=e[1];return w(t)+"("+w(n)+")"}else{if(e instanceof E)return"Type";if(e instanceof q)return"Int";if(e instanceof N){let t=e[0],n=e[1],r=e[2],i=e[3];return te(t,i)?"forall "+n+": "+w(r)+". "+w(i):r instanceof he||r instanceof R||r instanceof E||r instanceof q?w(r)+"->"+w(i):(r instanceof B||r instanceof V||r instanceof N,"("+w(r)+") -> "+w(i))}else{let t=e[1],n=e[2],r=e[3],i=e[4];return"let "+t+": "+w(n)+" = "+w(r)+`;
`+w(i)}}}}function Dr(e){return e.isOk(),e[0]}function ve(e,t,n,r){for(;;){let i=e,s=t,u=n,l=r;if(i instanceof B){let f=i[0],o=i[1],_=i[2];if(s instanceof N){let k=s[0],I=s[2],se=s[3];e=_,t=Pe(se,k,new R(f,o)),n=J(u,f,I),r=l}else return new y("Type mismatch. Expected "+w(s)+" but found a lambda.")}else return g(Be(i,u,l),f=>it(f,s,l)?new h(void 0):new y("Type mismatch. Expected "+w(s)+" but found "+w(f)+"."))}}function Be(e,t,n){if(e instanceof he)return new h(new q);if(e instanceof R){let r=e[0],i=e[1];return Nt(gt(t,r),s=>"Variable "+i+" is not defined in the current context.")}else if(e instanceof V){let r=e[0],i=e[1];return g(Be(r,t,n),s=>{if(s instanceof N){let u=s[0],l=s[2],f=s[3];return g(ve(i,l,t,n),o=>new h(Pe(f,u,i)))}else return new y("Type error. Expected a function type, but found "+w(s))})}else if(e instanceof N){let r=e[0],i=e[2],s=e[3];return g(ve(i,new E,t,n),u=>g(ve(s,new E,J(t,r,i),n),l=>new h(new E)))}else{if(e instanceof q)return new h(new E);if(e instanceof E)return new h(new E);if(e instanceof Se){let r=e[0],i=e[2],s=e[3],u=e[4];return g(ve(s,i,t,n),l=>Be(u,J(t,r,i),J(n,r,s)))}else return new y("Type error. Can't infer the type of this lambda. Try annotating it with a `let` expression.")}}function D(){return c(j(),e=>c(_t(a([jr(),Wr(),Ur(),Pr(),Yr(),qr(),Hr(),Gr()])),t=>c(j(),n=>c(Te(c(x("("),r=>c(Z(D),i=>c(x(")"),s=>c(j(),u=>T(i)))))),r=>{let i=Mt(r,t,(s,u)=>new tn(s,u));return c(Mr(oe("->")),s=>c((()=>s.isOk()?c(Z(D),u=>T(new $t("_",i,u))):T(i))(),u=>T(u)))}))))}function Pr(){return c(oe("forall"),e=>c(xt(ye(Ve(),x("_"))),t=>c(j(),n=>c(De(),r=>c(j(),i=>c(x(":"),s=>c(j(),u=>c(Z(D),l=>c(x("."),f=>c(Z(D),o=>T(new $t(r,l,o))))))))))))}function Hr(){return c(x("\\"),e=>c(j(),t=>c(De(),n=>c(j(),r=>c(x("."),i=>c(j(),s=>c(Z(D),u=>T(new en(n,u)))))))))}function Yr(){return c(oe("let "),e=>c(j(),t=>c(De(),n=>c(j(),r=>c(x(":"),i=>c(Z(D),s=>c(oe("="),u=>c(Z(D),l=>c(x(";"),f=>c(Z(D),o=>T(new Br(n,s,l,o))))))))))))}function Gr(){return c(x("("),e=>c(Z(D),t=>c(x(")"),n=>T(t))))}function Kr(e){let t=g(zt(Nr(D(),e),"there's a mistake in the notation somewhere; I couldn't understand it!"),n=>g(Fr(new sn(0),n),r=>g(Be(r,ze(),ze()),i=>{let s=Vr(r);return new h(w(s))})));return Dr(t)}class je extends p{constructor(t,n){super(),this.untyped=t,this.typed=n}}class un extends p{constructor(t){super(),this[0]=t}}function Xr(e){return new je("","")}function Jr(e,t){if(t instanceof un){let n=t[0];return new je(n,e.typed)}else{let n=t[0];return new je(e.untyped,n)}}function Zr(e){return Je(a([]),a([Xe(a([]),a([d("Who I Am")])),Le(a([]),a([d("I'm Ryan Brewer, the software developer behind "),le(a([ue("https://github.com/RyanBrewer317/SaberVM")]),a([d("SaberVM")])),d(`,
an abstract machine for safe, portable computation that functional languages can compile to. 
With SaberVM, I'm hoping to broaden accessibility to safe computation, both informationally and financially. 
Consider supporting my work!
`)])),Ir(a([yr("https://github.com/sponsors/RyanBrewer317/button"),we("title","Sponsor RyanBrewer317"),mr(32),br(114),pr(a([["border","0"],["border-radius","6px;"]]))])),Xe(a([]),a([d("My Website")])),Le(a([]),a([d("This is my website. It's hosted by Firebase and written mostly in "),le(a([ue("https://gleam.run")]),a([d("Gleam")])),d(", and the code is up on my "),le(a([ue("https://github.com/RyanBrewer317/ryanbrewer-dev")]),a([d("github")])),d(". The only framework used is "),le(a([ue("https://lustre.build/")]),a([d("Lustre")])),d("; scripting, markup, styles, and layout were all done by hand.")])),Xe(a([]),a([d("Lambda Calculus in Gleam")])),Le(a([]),a([d(`
I study programming language design, and I'm particularly fond of functional programming.
That's why I made this website in `),le(a([ue("https://gleam.run")]),a([d("Gleam")])),d(`,
a statically-typed functional language
that can run anywhere JavaScript can, as well as on Erlang's BEAM VM. 
I've used Gleam to write a lambda calculus evaluator that you can play with below. 
Lambda abstractions are written like 
`),ae(a([]),a([d("\\var. body")])),d(", and are called like "),ae(a([]),a([d("fun(arg)")])),d(". There are also positive integers like 7. Try writing "),ae(a([]),a([d("(\\x.x)(2)")])),d(", which evaluates to 2. The code for this can be found "),le(a([ue("https://github.com/RyanBrewer317/ryanbrewer-dev/blob/main/src/tinylang.gleam")]),a([d("here")])),d(".")])),Tr(a([vt("code"),wr("Write some lambda calculus code! Example: (\\x.\\y.x)(\\x.x)(3)"),vr(t=>new un(t))])),Or(a([])),(()=>{if(e instanceof je&&e.untyped==="")return d("");{let t=e.untyped,n=Kr(t);return(r=>Je(a([]),a([kr(a([]),a([d("output ")])),d(" (variables may be renamed): "),Je(a([vt("code-output")]),a([d(r)]))])))(n)}})(),Le(a([]),a([d(`Want types in your lambda calculus?
Below I've extended the evaluator with a simple dependent type system. 
Lambdas need to be annotated using a `),ae(a([]),a([d("let")])),d("-binding, like "),ae(a([]),a([d("let f: Int->Int = \\x. x; f(3)")])),d(". Pi types are written "),ae(a([]),a([d("forall x: A. B")])),d(", and the type of types is "),ae(a([]),a([d("Type")])),d(". The code for this extended evaluator can be found "),le(a([ue("https://github.com/RyanBrewer317/ryanbrewer-dev/blob/main/src/tinytypedlang.gleam")]),a([d("here")])),d(".")]))]))}function Qr(){let e=Er(Xr,Jr,Zr),t=cr(e,"[data-lustre-app]",void 0);if(!t.isOk())throw st("assignment_no_match","ryanbrewerdev",16,"main","Assignment pattern did not match",{value:t});return t[0]}document.addEventListener("DOMContentLoaded",()=>{Qr()});
